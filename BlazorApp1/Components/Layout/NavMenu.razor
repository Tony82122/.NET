@using BlazorApp1.HttpEntities
@inject AuthenticationStateProvider AuthStateProvider
@inject IAuthProvider AuthProvider
@inject NavigationManager NavManager

<div class="reddit-sidebar">
    <div class="reddit-header">
        <div class="reddit-logo">🔥 r/Forum</div>
    </div>

    <nav class="reddit-nav">
        <AuthorizeView>
            <Authorized>
                <div class="user-section">
                    <div class="user-info">
                        <div class="user-name">@context.User.Identity?.Name</div>
                        <button class="logout-btn" @onclick="HandleLogout">Logout</button>
                    </div>
                </div>
            </Authorized>
            <NotAuthorized>
                <div class="auth-buttons">
                    <NavLink href="login" class="btn-auth-nav">Login</NavLink>
                </div>
            </NotAuthorized>
        </AuthorizeView>

        <div class="nav-divider"></div>

        <div class="nav-section">
            <div class="nav-title">Navigation</div>
            <NavLink href="/" class="nav-link" Match="NavLinkMatch.All">
                <span class="nav-icon">🏠</span>
                <span>Home</span>
            </NavLink>
            <NavLink href="Posts" class="nav-link">
                <span class="nav-icon">📰</span>
                <span>Posts</span>
            </NavLink>
        </div>

        <div class="nav-divider"></div>

        <div class="nav-section">
            <div class="nav-title">Community</div>
            <div class="community-item">
                <span class="nav-icon">⭐</span>
                <span>Hot</span>
            </div>
            <div class="community-item">
                <span class="nav-icon">📈</span>
                <span>Trending</span>
            </div>
            <div class="community-item">
                <span class="nav-icon">✨</span>
                <span>New</span>
            </div>
        </div>
    </nav>
</div>

@code {
    private async Task HandleLogout()
    {
        await AuthProvider.Logout();
        NavManager.NavigateTo("/login", forceLoad: true);
    }
}
